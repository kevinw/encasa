<!doctype html>
<html>
<head>
  <meta charset="utf-8" /> 
  <title>&#x1f3e1; {{ todos_count }} TODOs</title>
  <base target="_parent">
  <style>

/* cyrillic */
@font-face {
  font-family: 'Oswald';
  font-style: normal;
  font-weight: 400;
  src: local('Oswald Regular'), local('Oswald-Regular'), url(/fonts/TK3iWkUHHAIjg752HT8Ghe4.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* vietnamese */
@font-face {
  font-family: 'Oswald';
  font-style: normal;
  font-weight: 400;
  src: local('Oswald Regular'), local('Oswald-Regular'), url(/fonts/TK3iWkUHHAIjg752Fj8Ghe4.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Oswald';
  font-style: normal;
  font-weight: 400;
  src: local('Oswald Regular'), local('Oswald-Regular'), url(/fonts/TK3iWkUHHAIjg752Fz8Ghe4.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Oswald';
  font-style: normal;
  font-weight: 400;
  src: local('Oswald Regular'), local('Oswald-Regular'), url(/fonts/TK3iWkUHHAIjg752GT8G.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

    body {
      font-family: Arial; /* 'Oswald', sans-serif; */
    }
    h1 {
      padding-left: 15px;
    }
    .unstyled-list {
      list-style: none;
    }
    input[type="checkbox"]:checked + label {
        text-decoration: line-through;
        color: grey;
    }
    .navigable-list li:focus-within {
      background-color: cyan;
    }
    /* .navigable-list :nth-child(odd) { background: #efefef; } */
    .todo-context, .todo-project {
      color: grey;
      text-decoration: none;
    }
    a.todo-context:hover, a.todo-project:hover {
      text-decoration: underline
    }
    .last-updated {
      color: grey;
      font-size: 80%;
    }
    .due-date-outer {
      font-size: 80%;
    }
    h1 a { text-decoration: none; }
    h1 a:hover { text-decoration: underline; }

    .due-date-outer.due-date-today {
      border-radius: 5px;
      border: 2px solid red;
      padding: 0 4px 0 4px;
    }
    .due-date-outer.due-date-past, .local-file-needs-update {
      background: red;
      color: white;
      border-radius: 5px;
      padding: 0 4px 0 4px;
    }
    .due-date-outer.due-date-today { color: red; }
    .due-date-outer.due-date-future { color: grey; }
    .todo-done .due-date-outer { display: none; }

    .priority-label { font-size: 70%; color: grey; }
    .todo-priority-0 { font-size: 150%; }
    .todo-priority-1 { font-size: 120%; }
  </style>
</head>
<body>
  <h1><a href="/"><span id="total_todos_count">{{ todos_count }}</span> TODOs</a></h1>

  <ul class="unstyled-list navigable-list">
  {% for local_file in local_files %}
    <li{% if local_file.needs_update() %} class="needs-update"{% endif %}>
      <a class="navigable-elem" href="editlocal://{{ local_file.desc.path }}">{{ local_file.desc.readable_name() }}</a>
      <span class="last-updated{% if local_file.needs_update() %} local-file-needs-update{% endif %}">
        last updated {{ local_file.duration_since_modified()|humanize_duration }}
      </span>
    </li>
  {% endfor %}
  </ul>

  <ul id="todo_list" class="unstyled-list navigable-list">
  {% for todo in todos %}
      <li class="todo-priority-{{ todo.priority }}{% if todo.finished %} todo-done{% endif %}">
      <input class="navigable-elem" type="checkbox" id="todo-{{- loop.index0 }}" value="{{ todo.calc_hash() }}"{% if todo.finished %} checked{% endif %}>
      <label> <!-- for="todo-{{- loop.index0 }}"> -->
        <span class="priority-label">{{ todo.priority_label() }}</span>
        {{ todo.subject|linkify|spanify|safe }}
        {% match todo.due_date %}
        {% when Some with (due_date) %}
          <span class="due-date-outer due-date-{{ due_date|date_when_css_class }}">
            due <span class="due-date">{{ due_date|humanize_date }}</span>
          </span>
        {% when None %}
        {% endmatch %}
      </label>
    </li>
  {% endfor %}
  </ul>

  <!--
  <pre>{{ json_dump }}</pre>
  -->

<script>
{% include "main.js" %}
</script>

</body>
</html>
